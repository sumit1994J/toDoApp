<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link th:href="@{/webjars/bootstrap/5.0.2/dist/css/bootstrap.min.css}"
	rel="stylesheet"
	integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
	crossorigin="anonymous">
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
	rel="stylesheet"
	integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
	crossorigin="anonymous">
<link
	href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"
	rel="stylesheet">


<style>

.col-yellowstrip {
	height: 56px;
	background-color: #FEB640;
	border-bottom: 1px solid #CCC;
}

.modal-body {
    padding: 0;
}

.no-padding-margin {
	padding: 0;
	margin: 0;
}

.col-custom {
	background-color: #F2F2F2;
	width: 100%;
	height: 450px;
}

.mb-4 .form-control {
	width: 400px;
}

button[type="submit"] {
	width: 400px;
}

.mb-4+.d-grid {
	margin-top: 30px;
}
/* Sidebar Styles */
.sidebar {
    height: 100%;
    width: 0; /* Changed initial width to 0 */
    position: fixed;
    top: 0;
    left: 0;
    background-color: #111;
    overflow-x: hidden;
    transition: 0.5s;
    padding-top: 60px;
}

.sidebar a {
	padding: 10px 15px;
	text-decoration: none;
	font-size: 20px;
	color: #818181;
	display: block;
	transition: 0.3s;
}

.sidebar a:hover {
	color: #f1f1f1;
}

.sidebar .closebtn {
	position: absolute;
	top: 0;
	right: 25px;
	font-size: 36px;
	margin-left: 50px;
}

@media screen and (max-height: 450px) {
	.sidebar {
		padding-top: 15px;
	}
	.sidebar a {
		font-size: 18px;
	}
}

/* Menu button */
.menu-btn {
	font-size: 30px;
	cursor: pointer;
	color: white;
}

@media screen and (max-width: 992px) {
	.sidebar {
		width: 0;
		overflow: hidden; /* Hide the sidebar content when not visible */
	}
	.menu-btn {
		display: block;
	} /* Displayed as a button on small screens */
	.container.mainbody {
		/* Adjust container margin based on sidebar width */
		margin-left: 0;
		transition: margin-left 0.5s;
	}
	.sidebar-open .container.mainbody {
		margin-left: 250px; /* Adjust this value based on your sidebar width */
		transition: margin-left 0.5s; /* Add smooth transition */
	}
	.main-body-button {
		position: fixed;
		bottom: 10px;
		right: 10px;
	}
	@media screen and (max-width: 576px) {
		.sidebar-open .container.mainbody {
			margin-left: 0; /* Remove margin on small screens to avoid overlap */
		}
	}
	.taskcontain {
		margin-left: 0; /* Initial margin */
		transition: margin-left 0.5s; /* Add transition for smooth resizing */
	}
	.sidebar-open .taskcontain {
		margin-left: 250px;
		/* Adjust this value based on your sidebar width */
	}
	.rightbody {
		transition: width 0.5s ease;
		/* Add transition for smooth width adjustment */
	}
	.card {
		transition: width 0.3s ease;
		/* Add transition for smooth width adjustment */
	}
	.sidebar-open .card {
		width: calc(100% - 250px);
		/* Adjust width of card when sidebar is open */
	}
	
	.sidebar {
    /* Your existing sidebar styles */
    display: flex;
    flex-direction: column;
}

.logout-container {
    margin-left: auto;
    margin-top: auto;
}

.sidebar {
    /* Your existing sidebar styles */
    display: flex;
    flex-direction: column;
}

.sidebar a {
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.sidebar a i {
    margin-left: 10px; /* Adjust margin as needed */
}

@media screen and (min-width: 768px) {
    .sidebar a i {
        margin-left: 20px; /* Increase margin on larger screens */
    }
}


	
}
</style>
<title>TODOs App</title>
</head><body>
	<div class="container-fluid">
		<div class="row">
			<div class="col-lg-12 no-padding-margin" style="height:400px">
				<div class="container-fluid mainbody no-padding-margin" style="margin-left: 0px; background-color:#F2F2F2; height:800px;">
					<div
						class="row row-name bg-warning text-white align-items-center no-padding-margin">
						<div class="col col-yellowstrip">
							<!-- Menu Button -->

						</div>
					</div>



					<div class="row justify-content-center no-padding-margin">
						<div class="col d-flex align-items-center no-padding-margin" style="background:white;">
							<span class="menu-btn" onclick="toggleNav()"
								style="color: black;">&#9776;</span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
							<h2 class="text-center mx-auto" style="color: #FEB640;">TODOs</h2>
						</div>


						<div class="col-auto" style="background:white;">
							<input type="date" id="pickedUpDate" style="width:25px;">
							<!-- <button class="btn btn-outline-secondary" type="button"
								id="datepicker-icon">
								<i class="fas fa-calendar-alt"></i>
							</button> -->
						</div>
					</div>





					<!-- Sidebar -->
					<div class="sidebar" id="mySidebar">
    <a href="javascript:void(0)" class="closebtn" onclick="toggleNav()">&times;</a> 
    <a th:href="@{/home}">Home <i class="fas fa-home"></i></a>
    <a th:href="@{/finishedTask}">Completed Task <i class="fas fa-user-edit"></i></a>
    <a th:href="@{/upgradeProfile}">Update Profile <i class="fas fa-user-edit"></i></a>
    <a th:href="@{/login}">Logout <i class="fas fa-sign-out-alt"></i></a>
</div>
					
					

					<div class="container-fluid mainbody rightbody no-padding-margin">

					</div>
					
					
					<div class="container mt-5">
						<div class="row">
							<!-- Iterate over allTaskDetails and create a Bootstrap card for each task -->
							<div th:each="task : ${AllTaskDetails}" class="col-md-4 mb-3">
								<div class="card">
									<div class="card-header">

										<h5 class="card-title">
											Date - <span
												th:text="${#dates.format(task.taskDate, 'EEE, dd MMM yyyy')}"></span>
										</h5>
									</div>
									<div class="container card-body p-0">
										<p class="card-text" th:text="${task.taskDesc}"></p>
										<!-- Add any other ticket details you want to display -->
										<div class="col-auto d-flex align-items-center">
											<form th:action="@{/finishTask}" method="post" class="w-100">
												<input type="hidden" name="id" th:value="${task.id}" />
																																			   
				  
				
			   
			  

			 
								  
						  
								  

								 
											   
			   
			   
											  
											 
																   
														  
																  
													   
												<button type="submit" class="btn btn-primary btn-sm w-100" style="background-color: #FEB640; border-color:#FEB640;">Finish</button>
											</form>
										</div>
									</div>
								</div>

							</div>
						</div>
					</div>

					<div class="container mt-5">
						<!-- Button trigger modal -->

						<div class="position-fixed bottom-0 end-0 mb-5 me-4">
							<button class="btn btn-primary btn-lg rounded-circle" 
								data-bs-toggle="modal" data-bs-target="#exampleModal"
								style="width: 60px; height: 60px; font-size: 24px; background-color: #FEB640; border-color:#FEB640;"  >
								<i class="fas fa-plus"></i>
							</button>
						</div>



						<!-- Modal -->
						<div class="modal fade" id="exampleModal" tabindex="-1"
							aria-labelledby="exampleModalLabel" aria-hidden="true">
							<div class="modal-dialog modal-dialog-centered">
								<div class="modal-content">
									<div class="modal-header">
										<h5 class="modal-title" id="exampleModalLabel">Date</h5>
										<button type="button" class="btn-close"
											data-bs-dismiss="modal" aria-label="Close"></button>
									</div>
									<div class="modal-body">
										<!-- Form inside the modal -->
										<form action="#" th:action="@{/taskSubmit}"
											th:object="${TaskDetails}" method="post">
											<div class="form-group row">

												<div class="col-sm-8">
													<input type="date" class="form-control" id="taskDate"
														name="taskDate" hidden>
												</div>
											</div>
											<div class="mb-3">
												<label for="exampleFormControlTextarea1" class="form-label"></label>
												<textarea class="form-control" id="taskDesc" name="taskDesc"  style="width:450px;margin-left:20px;"
													rows="3"></textarea>
											</div>
											<button type="submit" class="btn btn-primary w-100" style="background-color: #FEB640; border-color:#FEB640;">ADD
												TASK</button>
										</form>
									</div>
								</div>
							</div>
						</div>
					</div>

				</div>
			</div>
		</div>
		
		 <div class="row bottom-row position-fixed bottom-0 mt-3" style="background-color:black; width:100%;">
    <div class="col d-flex justify-content-center" style="background-color:white;color:#FEB640;">
        <a th:href="@{/home}" style="background-color:white;color:#FEB640;border-color:white;font-weight: bold;" class="btn btn-primary">TODOs</a>
    </div>
    <div class="col d-flex justify-content-center" style="background-color:white;color:#FEB640;">
        <a th:href="@{/finishedTask}" style="background-color:white;color:#FEB640;border-color:white;font-weight: bold;" class="btn btn-primary">Finished</a>
    </div>
</div>
		 
	</div>
	<script
		src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
	<script>
		window.onload = function() {
			var sidebar = document.getElementById("mySidebar");
			var body = document.body;
			var mainBody = document.querySelector(".mainbody"); // Select the .mainbody element

			sidebar.style.width = "0"; // Ensure sidebar is closed initially
			body.classList.remove("sidebar-open"); // Remove the class when closing the sidebar
			mainBody.style.marginLeft = "0"; // Reset the margin when sidebar is closed

			var today = new Date();
			var dd = String(today.getDate()).padStart(2, '0');
			var mm = String(today.getMonth() + 1).padStart(2, '0'); // January is 0!
			var yyyy = today.getFullYear();

			today = mm + '/' + dd + '/' + yyyy;

			// Set today's date as modal title
			// document.getElementById('exampleModalLabel').innerText = 'Date - ' + today;

			updateModalTitle();
		};

		function toggleNav() {
			var sidebar = document.getElementById("mySidebar");
			var body = document.body;
			var mainBody = document.querySelector(".mainbody"); // Select the .mainbody element

			if (sidebar.style.width === "250px" || sidebar.style.width === "") {
				sidebar.style.width = "0";
				body.classList.remove("sidebar-open"); // Remove the class when closing the sidebar
				mainBody.style.marginLeft = "0"; // Reset the margin when sidebar is closed
			} else {
				sidebar.style.width = "250px";
				body.classList.add("sidebar-open"); // Add the class when opening the sidebar
				mainBody.style.marginLeft = "250px"; // Adjust the margin when sidebar is open
			}
		}

		function updateModalTitle() {
			var today = new Date();
			var pickedDate = document.getElementById('pickedUpDate').value;
			var modalTitle = document.getElementById('exampleModalLabel');
			var taskDateInput = document.getElementById('taskDate');

			if (pickedDate) {
				var selectedDate = new Date(pickedDate);
				var options = {
					weekday : 'short',
					day : '2-digit',
					month : 'short',
					year : 'numeric'
				};
				var formattedDate = new Intl.DateTimeFormat('en-US', options)
						.format(selectedDate);
				modalTitle.innerText = 'Date - ' + formattedDate;
				taskDateInput.value = pickedDate; // Set taskDate input value to selected date
			} else {
				var options = {
					weekday : 'short',
					day : '2-digit',
					month : 'short',
					year : 'numeric'
				};
				var formattedDate = new Intl.DateTimeFormat('en-US', options)
						.format(today);
				modalTitle.innerText = 'Date - ' + formattedDate;
				taskDateInput.value = today.toISOString().split('T')[0]; // Set taskDate input value to today's date
			}
		}

		document.getElementById('pickedUpDate').addEventListener('change',
				updateModalTitle);
	</script>



</body>
</html>
